<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Physics Test without Networking</title>
    <meta name="description" content="Physics Test without Networking" />
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.0.0/dist/aframe-extras.controls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/physx@0.1.2/dist/physx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-desktop-vr-controller@0.1.1/dist/desktop-vr-controller.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/physx@main/examples/components/force-pushable.js"></script>
    <script src="/dist/air-hockey.js"></script>
  </head>
  <body>
    <!-- reduce speed x100 to workaround low-impact restitution issue. -->
    <a-scene
      background="color:#088"
      physx="autoLoad: true; delay: 1000; gravity: 0 -1 0; speed: 0.01"
      spawn-balls>

      <a-entity camera look-controls wasd-controls="acceleration: 10" position="0 1.6 2">
        <a-entity cursor
                  raycaster="objects:[physx-force-pushable]"
                  position="0 0 -0.5"
                  geometry="primitive: circle; radius: 0.01; segments: 4;"
                  material="color: #FF4444; shader: flat">
        </a-entity>
      </a-entity>


      <!--<a-box id="base" position="0 0.9 0" width="1" height="0.2" depth="2" color="#888"
               physx-body="type: static">
      </a-box>-->
      <a-box position="-0.5 1.05 0" width="0.1" height="0.2" depth="2.1" color="#888"
             physx-body="type: static"
             physx-material="restitution: 1">
      </a-box>
      <a-box position="0.5 1.05 0" width="0.1" height="0.2" depth="2.1" color="#888"
             physx-body="type: static"
             physx-material="restitution: 1">
      </a-box>
      <a-box position="0 1.05 1" width="1.1" height="0.2" depth="0.1" color="#888"
             physx-body="type: static"
             physx-material="restitution: 1">
      </a-box>
      <a-box position="0 1.05 -1" width="1.1" height="0.2" depth="0.1" color="#888"
             physx-body="type: static"
             physx-material="restitution: 1">
      </a-box>

      <a-cylinder id="paddle1" position="0 1.015 0.75" radius="0.05" height="0.03" color="red"
            physx-body="type: dynamic"
            physx-force-pushable="force:1000"
            physx-material="restitution: 1">
          <a-entity physx-joint="type: D6; target:#base; collideWithTarget: false"
                    physx-joint-constraint__xz="constrainedAxes: x, z; linearLimit: -10 10"
                    physx-joint-constraint__y="constrainedAxes: y; linearLimit: 0 0">
          </a-entity>
      </a-cylinder>
      <a-cylinder id="paddle2" position="0 1.015 -0.75" radius="0.05" height="0.03" color="blue"
            physx-body="type: dynamic"
            physx-force-pushable="force:1000"
            physx-material="restitution: 1">
        <a-entity physx-joint="type: D6; target:#base; collideWithTarget: false"
            physx-joint-constraint__xz="constrainedAxes: x, z; linearLimit: -10 10"
            physx-joint-constraint__y="constrainedAxes: y; linearLimit: 0 0">
        </a-entity>
      </a-cylinder>
      <a-sphere id="paddle3" position="0 1.025 -0.5" radius="0.05" color="magenta"
            physx-body="type: dynamic"
            physx-force-pushable="force:1000"
            physx-material="restitution: 1">
        <a-entity physx-joint="type: D6; target:#base; collideWithTarget: false"
            physx-joint-constraint__xz="constrainedAxes: x, z; linearLimit: -10 10"
            physx-joint-constraint__y="constrainedAxes: y; linearLimit: 0 0">
        </a-entity>
      </a-sphere>
    </a-scene>
  </body>
</html>